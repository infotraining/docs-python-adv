

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Klasy i obiekty - elementy zaawansowane &#8212; Zaawansowane programowanie w języku Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'classes';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Optymalne wykorzystanie wbudowanych typów Pythona" href="builtins.html" />
    <link rel="prev" title="Zaawansowane programowanie w języku Python" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Zaawansowane programowanie w języku Python
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Klasy i obiekty - elementy zaawansowane</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="builtins.html">Optymalne wykorzystanie wbudowanych typów Pythona</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="builtin-types-big-o.html">Wydajność operacji na typach wbudowanych</a></li>
<li class="toctree-l2"><a class="reference internal" href="builtin-types.html">Moduł collections</a></li>




</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Funkcje - elementy zaawansowane</a></li>
<li class="toctree-l1"><a class="reference internal" href="iterators.html">Elementy programowania funkcyjnego</a></li>
<li class="toctree-l1"><a class="reference internal" href="decorators.html">Dekoratory funkcji i klas</a></li>
<li class="toctree-l1"><a class="reference internal" href="context-managers.html">Menadżery kontekstu</a></li>
<li class="toctree-l1"><a class="reference internal" href="pattern-matching.html">Structural Pattern Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="metaclasses.html">Metaklasy</a></li>
<li class="toctree-l1"><a class="reference internal" href="packages.html">Moduły i pakiety</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit-tests.html">Testy jednostkowe</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/infotraining/docs-python-adv" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/infotraining/docs-python-adv/issues/new?title=Issue%20on%20page%20%2Fclasses.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/classes.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Klasy i obiekty - elementy zaawansowane</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-jako-jezyk-obiektowy-podstawowe-informacje">Python jako język obiektowy - podstawowe informacje</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wszystko-jest-obiektem">Wszystko jest obiektem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamiczne-typowanie">Dynamiczne typowanie</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tozsamosc-typ-a-wartosc">Tożsamość, typ a wartość</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definiowanie-klasy">Definiowanie klasy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-specjalne">Metody specjalne</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#najwazniejsze-metody-specjalne">Najważniejsze metody specjalne</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-operatorowe">Metody operatorowe</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dostep-do-atrybutow">Dostęp do atrybutów</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#skladowe-chronione-i-prywatne">Składowe chronione i prywatne</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skladowe-chronione">Składowe chronione</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skladowe-prywatne">Składowe prywatne</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#atrybuty-klasy-i-metody-statyczne">Atrybuty klasy i metody statyczne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-klasy">Metody klasy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deskryptory">Deskryptory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rodzaje-deskryptorow">Rodzaje deskryptorów</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nazwy-atrybutow-i-deskryptory">Nazwy atrybutów i deskryptory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kolejnosc-wyszukiwania-nazw-przy-dostepie-do-atrybutow">Kolejność wyszukiwania nazw przy dostępie do atrybutów</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wywolanie-z-instancji">Wywołanie z instancji</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wywolanie-z-klasy">Wywołanie z klasy</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wlasciwosci-properties">Właściwości (properties)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sloty">Sloty</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dziedziczenie">Dziedziczenie</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#podstawy">Podstawy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method-resolution-order-mro">Method Resolution Order (MRO)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dziedziczenie-wielobazowe">Dziedziczenie wielobazowe</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mixins-klasy-domieszkowe">Mixins (klasy domieszkowe)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dziedziczenie-po-typach-wbudowanych">Dziedziczenie po typach wbudowanych</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dziedziczenie-po-typach-niezmiennych">Dziedziczenie po typach niezmiennych</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#abstract-base-classes">Abstract Base Classes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-jako-obiekt">Klasa jako obiekt</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#class-builders-dataclass">Class Builders (<code class="docutils literal notranslate"><span class="pre">@dataclass</span></code>)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parametry-dekoratora-dataclass">Parametry dekoratora <code class="docutils literal notranslate"><span class="pre">@dataclass</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementacja-skladowych">Implementacja składowych</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#przydatne-metody-dataclass-y">Przydatne metody dataclass’y</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#post-init">Post-init</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pola-klasy">Pola klasy</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="klasy-i-obiekty-elementy-zaawansowane">
<h1>Klasy i obiekty - elementy zaawansowane<a class="headerlink" href="#klasy-i-obiekty-elementy-zaawansowane" title="Permalink to this heading">#</a></h1>
<section id="python-jako-jezyk-obiektowy-podstawowe-informacje">
<h2>Python jako język obiektowy - podstawowe informacje<a class="headerlink" href="#python-jako-jezyk-obiektowy-podstawowe-informacje" title="Permalink to this heading">#</a></h2>
<section id="wszystko-jest-obiektem">
<h3>Wszystko jest obiektem<a class="headerlink" href="#wszystko-jest-obiektem" title="Permalink to this heading">#</a></h3>
<p>Python jest językiem w pełni obiektowym - wszystko jest obiektem, także wartości typów prymitywnych i funkcje.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8
</pre></div>
</div>
</div>
</div>
</section>
<section id="dynamiczne-typowanie">
<h3>Dynamiczne typowanie<a class="headerlink" href="#dynamiczne-typowanie" title="Permalink to this heading">#</a></h3>
<p>Python jest językiem z <strong>dynamicznym typowaniem</strong>.
Zmienne przechowują referencję do obiektu, a dopiero obiekty posiadają typ.
Dlatego raz zdefiniowana zmienna może “zmienić typ”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span>
<span class="n">var</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;text&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">var</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p>Dynamiczne typowanie znacznie ułatwia programowanie, ponieważ nie narzuca ograniczeń na typ zmiennych.</p>
<p>Dzięki temu programista może skupić się na bardziej istotnych aspektach, takich jak poprawność kodu, albo po prostu napisać kod szybciej.</p>
<p>Dzięki dynamicznemu typowaniu dostępna jest funkcja <code class="docutils literal notranslate"><span class="pre">eval</span></code>, która pozwala na wykonanie dowolnego, dynamicznie utworzonego wyrażenia:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;x+1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p>Dynamiczne typowanie umożliwia także łatwe użycie technik metaprogramowania, takich jak metaklasy, które zostaną omówione później.
Pozwala to np. na dynamiczne tworzenie nowych typów.
Dzięki temu implementacje ORM (<em>Object-Relational Mapping</em>, mapowanie obiektowo-relacyjne) są bardziej naturalne.</p>
</section>
<section id="tozsamosc-typ-a-wartosc">
<h3>Tożsamość, typ a wartość<a class="headerlink" href="#tozsamosc-typ-a-wartosc" title="Permalink to this heading">#</a></h3>
<p>Każdy obiekt posiada:</p>
<ul class="simple">
<li><p><strong>tożsamość</strong> (<em>identity</em>) - wskazuje na lokalizację obiektu w pamięci i można ją sprawdzić wywołując wbudowaną funkcję <code class="docutils literal notranslate"><span class="pre">id</span></code>;</p></li>
<li><p><strong>typ</strong> (<em>type</em>) opisuje reprezentację obiektu dla Pythona;</p></li>
<li><p><strong>wartość</strong> (<em>value</em>) to dane przechowywane w obiekcie.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">id</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>139999096994176
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>list
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numbers</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="definiowanie-klasy">
<h2>Definiowanie klasy<a class="headerlink" href="#definiowanie-klasy" title="Permalink to this heading">#</a></h2>
<p>Klasę definiujemy za pomocą słowa kluczowego <em>class</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<p>W Pythonie wszystko jest obiektem, także klasa, dlatego możemy mówić o <em>obiekcie klasy</em>.
Taki obiekt również ma swój typ:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyClass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>__main__.MyClass
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">MyClass</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>type
</pre></div>
</div>
</div>
</div>
</section>
<section id="metody-specjalne">
<h2>Metody specjalne<a class="headerlink" href="#metody-specjalne" title="Permalink to this heading">#</a></h2>
<p>Metodami specjalnymi nazywane są metody zaczynające i kończące się dwoma podkreślnikami.
Implementują one operacje, które wywołujemy przy użyciu specjalnej składni (np. porównanie dwóch obiektów <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span></code>, dostęp do atrybutów <code class="docutils literal notranslate"><span class="pre">obj.attribute</span></code> lub składnia <code class="docutils literal notranslate"><span class="pre">obj[key]</span></code>).</p>
<section id="najwazniejsze-metody-specjalne">
<h3>Najważniejsze metody specjalne<a class="headerlink" href="#najwazniejsze-metody-specjalne" title="Permalink to this heading">#</a></h3>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Kategoria</p></th>
<th class="head"><p>Nazwy metod</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>String/bytes representation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__repr__</span> <span class="pre">__str__</span> <span class="pre">__format__</span> <span class="pre">__bytes__</span> <span class="pre">__fspath__</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Konwersja do liczby</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__bool__</span> <span class="pre">__complex__</span> <span class="pre">__int__</span> <span class="pre">__float__</span> <span class="pre">__hash__</span> <span class="pre">__index__</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Emulacja kolekcji</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__len__</span> <span class="pre">__getitem__</span> <span class="pre">__setitem__</span> <span class="pre">__delitem__</span> <span class="pre">__contains__</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Iteracja</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__iter__</span> <span class="pre">__aiter__</span> <span class="pre">__next__</span> <span class="pre">__anext__</span> <span class="pre">__reversed__</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Funkcje lub korutyny</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__call__</span> <span class="pre">__await__</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Menadżer kontekstu</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__enter__</span> <span class="pre">__exit__</span> <span class="pre">__aexit__</span> <span class="pre">__aenter__</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Tworzenie i niszczenie instancji</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__new__</span> <span class="pre">__init__</span> <span class="pre">__del__</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Zarządzanie atrybutami</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__getattr__</span> <span class="pre">__getattribute__</span> <span class="pre">__setattr__</span> <span class="pre">__delattr__</span> <span class="pre">__dir__</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Deskryptory</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__get__</span> <span class="pre">__set__</span> <span class="pre">__delete__</span> <span class="pre">__set_name__</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Abstract base classes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__instancecheck__</span> <span class="pre">__subclasscheck__</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Metaprogramowanie</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__prepare__</span> <span class="pre">__init_subclass__</span> <span class="pre">__class_getitem__</span> <span class="pre">__mro_entries__</span> </code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="metody-operatorowe">
<h3>Metody operatorowe<a class="headerlink" href="#metody-operatorowe" title="Permalink to this heading">#</a></h3>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Kategoria operatorów</p></th>
<th class="head"><p>Symbole</p></th>
<th class="head"><p>Nazwy metod</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Jednoargumentowe</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">+</span> <span class="pre">abs()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__neg__</span> <span class="pre">__pos__</span> <span class="pre">__abs__</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Porównania</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">&lt;=</span> <span class="pre">==</span> <span class="pre">!=</span> <span class="pre">&gt;</span> <span class="pre">&gt;=</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__lt__</span> <span class="pre">__le__</span> <span class="pre">__eq__</span> <span class="pre">__ne__</span> <span class="pre">__gt__</span> <span class="pre">__ge__</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Arytmetyczne</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">-</span> <span class="pre">*</span> <span class="pre">/</span> <span class="pre">//</span> <span class="pre">%</span> <span class="pre">&#64;</span> <span class="pre">divmod()</span> <span class="pre">round()</span> <span class="pre">**</span> <span class="pre">pow()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__add__</span> <span class="pre">__sub__</span> <span class="pre">__mul__</span> <span class="pre">__truediv__</span> <span class="pre">__floordiv__</span> <span class="pre">__mod__</span> <span class="pre">__matmul__</span> <span class="pre">__divmod__</span> <span class="pre">__round__</span> <span class="pre">__pow__</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Arytmetyczne z przypisaniem</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+=</span> <span class="pre">-=</span> <span class="pre">*=</span> <span class="pre">/=</span> <span class="pre">//=</span> <span class="pre">%=</span> <span class="pre">&#64;=</span> <span class="pre">**=</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__iadd__</span> <span class="pre">__isub__</span> <span class="pre">__imul__</span> <span class="pre">__itruediv__</span> <span class="pre">__ifloordiv__</span> <span class="pre">__imod__</span> <span class="pre">__imatmul__</span> <span class="pre">__ipow__</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Bitowe</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&amp;</span> <span class="pre">|</span> <span class="pre">^</span> <span class="pre">&lt;&lt;</span> <span class="pre">&gt;&gt;</span> <span class="pre">~</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__and__</span> <span class="pre">__or__</span> <span class="pre">__xor__</span> <span class="pre">__lshift__</span> <span class="pre">__rshift__</span> <span class="pre">__invert__</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Bitowe z przypisaniem</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&amp;=</span> <span class="pre">|=</span> <span class="pre">^=</span> <span class="pre">&lt;&lt;=</span> <span class="pre">&gt;&gt;=</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__iand__</span> <span class="pre">__ior__</span> <span class="pre">__ixor__</span> <span class="pre">__ilshift__</span> <span class="pre">__irshift__</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="dostep-do-atrybutow">
<h3>Dostęp do atrybutów<a class="headerlink" href="#dostep-do-atrybutow" title="Permalink to this heading">#</a></h3>
<p>Dostęp do atrybutów kontrolują poniższe metody specjalne:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Metoda specjalna</p></th>
<th class="head"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__getattr__(self,</span> <span class="pre">name)</span></code></p></td>
<td><p>Wywoływana, gdy obiekt nie ma atrybutu <code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__setattr__(self,</span> <span class="pre">name,</span> <span class="pre">value)</span></code></p></td>
<td><p>Wywoływana podczas przypisywania atrybutów</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__delattr__(self,</span> <span class="pre">name)</span></code></p></td>
<td><p>Wywoływana przy usuwaniu atrybutu (<code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">obj.attr</span></code>)</p></td>
</tr>
</tbody>
</table>
<p>Przykład słownika wykorzystującego składnię <code class="docutils literal notranslate"><span class="pre">dict.key</span></code> zamiast <code class="docutils literal notranslate"><span class="pre">dict[key]</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Record</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Nie możemy użyć poniższego kodu:</span>
        <span class="c1">#     self._d = {}</span>
        <span class="c1"># ponieważ zakończyłby się on rekurencyjnym wywoływaniem metody __setattr__</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="s1">&#39;_dict&#39;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;getting&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    
    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;setting&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        
    <span class="k">def</span> <span class="fm">__delattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;deleting&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">person</span> <span class="o">=</span> <span class="n">Record</span><span class="p">()</span>
<span class="n">person</span><span class="o">.</span><span class="n">first_name</span> <span class="o">=</span> <span class="s2">&quot;John&quot;</span>
<span class="n">person</span><span class="o">.</span><span class="n">first_name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>setting first_name to John
getting first_name
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;John&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">person</span><span class="o">.</span><span class="n">first_name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>deleting first_name
</pre></div>
</div>
</div>
</div>
<p>Oprócz wspomnianych metod</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Metoda specjalna</p></th>
<th class="head"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__getattribute__(self,</span> <span class="pre">name)</span></code></p></td>
<td><p>Wywoływana bezwarunkowo przy dostępie do atrybutów klasy, nawet jeśli dany atrybut istnieje.</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">first_name</span> <span class="o">=</span> <span class="n">first_name</span>
    
    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;getattribute&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">first_name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>getattribute first_name
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;John&#39;
</pre></div>
</div>
</div>
</div>
<p>Przykład ilustrujący różnicę między <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> a <code class="docutils literal notranslate"><span class="pre">__getattribute__</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attribute</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;You asked for </span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="s2">, but I&#39;m giving you default&quot;</span>


<span class="k">class</span> <span class="nc">Bar</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attribute</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;You asked for </span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="s2">, but I&#39;m giving you default&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">foo</span><span class="o">.</span><span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;a&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span><span class="o">.</span><span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;You asked for b, but I&#39;m giving you default&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">getattr</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;a&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">getattr</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;You asked for b, but I&#39;m giving you default&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bar</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bar</span><span class="o">.</span><span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;You asked for a, but I&#39;m giving you default&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bar</span><span class="o">.</span><span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;You asked for b, but I&#39;m giving you default&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">getattr</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;You asked for a, but I&#39;m giving you default&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">getattr</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;You asked for b, but I&#39;m giving you default&quot;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="skladowe-chronione-i-prywatne">
<h2>Składowe chronione i prywatne<a class="headerlink" href="#skladowe-chronione-i-prywatne" title="Permalink to this heading">#</a></h2>
<section id="skladowe-chronione">
<h3>Składowe chronione<a class="headerlink" href="#skladowe-chronione" title="Permalink to this heading">#</a></h3>
<p>Składowe, które powinny być modyfikowane tylko przez klasę, powinny zaczynać się od podkreślnika.
Jest to powszechnie przyjęta konwencja oznaczająca, że dana składowa nie powinna być modyfikowana z zewnątrz.
Jest to jednak tylko konwencja - Python nie posiada mechanizmu ukrywającego takie składowe.
Wciąż można je modyfikować spoza klasy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BankAccount</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initial_balance</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">=</span> <span class="n">initial_balance</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">balance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">account</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="mf">100.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">account</span><span class="o">.</span><span class="n">balance</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">account</span><span class="o">.</span><span class="n">_balance</span><span class="p">)</span> <span class="c1"># # składowe chronione są wciąż dostępne z zewnątrz klas</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100.0
100.0
</pre></div>
</div>
</div>
</div>
</section>
<section id="skladowe-prywatne">
<h3>Składowe prywatne<a class="headerlink" href="#skladowe-prywatne" title="Permalink to this heading">#</a></h3>
<p>Aby ukryć atrybut lub metodę przed dostępem spoza klasy (składowa <em>private</em>), należy jej nazwę poprzedzić dwoma podkreślnikami (np.  <code class="docutils literal notranslate"><span class="pre">__atrybut</span></code>).
Taka składowa jest dostępna tylko wewnątrz tej klasy.
Składowe zaczynające się od dwóch podkreślników (nie będące metodami specjalnymi) są traktowane w szczególny sposób - ich nazwa zostaje zmieniona na <code class="docutils literal notranslate"><span class="pre">_NazwaKlasy__atrybut</span></code>.
Do tej składowej można się wciąż odwołać z zewnątrz klasy, ale tylko używając zmienionej nazwy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BankAccount</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">balance</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__balance</span> <span class="o">=</span> <span class="n">balance</span>
    
    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__balance</span> <span class="o">-=</span> <span class="n">amount</span>
    
    <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__balance</span> <span class="o">+=</span> <span class="n">amount</span>
    
    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;owner:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">,</span> <span class="s2">&quot;; balance:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__balance</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jk</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s2">&quot;Jan Kowalski&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">jk</span><span class="o">.</span><span class="n">__balance</span><span class="p">)</span> <span class="c1"># błąd!</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">29</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">jk</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s2">&quot;Jan Kowalski&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="nb">print</span><span class="p">(</span><span class="n">jk</span><span class="o">.</span><span class="n">__balance</span><span class="p">)</span> <span class="c1"># błąd!</span>

<span class="ne">AttributeError</span>: &#39;BankAccount&#39; object has no attribute &#39;__balance&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">jk</span><span class="o">.</span><span class="n">_BankAccount__balance</span><span class="p">)</span> <span class="c1"># ok</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1000
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="atrybuty-klasy-i-metody-statyczne">
<h2>Atrybuty klasy i metody statyczne<a class="headerlink" href="#atrybuty-klasy-i-metody-statyczne" title="Permalink to this heading">#</a></h2>
<p>Składowe statyczne są wspólne dla wszystkich instancji klasy.</p>
<p>Z kolei metoda statyczna to po prostu funkcja w przestrzeni nazw klasy.
Taką funkcję należy udekorować <code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span></code>.
Taka funkcja nie przyjmuje instancji klasy <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CountedObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c1"># statyczna składowa</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">CountedObject</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="nd">@staticmethod</span>  <span class="c1"># statyczna metoda</span>
    <span class="k">def</span> <span class="nf">get_count</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">CountedObject</span><span class="o">.</span><span class="n">count</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">CountedObject</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c1</span> <span class="o">=</span> <span class="n">CountedObject</span><span class="p">()</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">CountedObject</span><span class="p">()</span>
<span class="n">cs</span> <span class="o">=</span> <span class="p">[</span><span class="n">CountedObject</span><span class="p">(),</span> <span class="n">CountedObject</span><span class="p">()]</span>

<span class="n">CountedObject</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<p>Czasami atrybutów klasy używa się, aby zainicjalizować domyślną wartość dla pewnych atrybutów instancji.
Należy jednak być ostrożnym:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonWithDefaultAttributes</span><span class="p">:</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="s1">&#39;John&#39;</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="s1">&#39;Smith&#39;</span>
    <span class="n">phones</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">p1</span> <span class="o">=</span> <span class="n">PersonWithDefaultAttributes</span><span class="p">()</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">PersonWithDefaultAttributes</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">first_name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">first_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>John
John
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">first_name</span> <span class="o">=</span> <span class="s1">&#39;Bob&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">first_name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">first_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Bob
John
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">PersonWithDefaultAttributes</span><span class="o">.</span><span class="n">last_name</span> <span class="o">=</span> <span class="s1">&#39;Williams&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Williams
Williams
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">phones</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;+48123456789&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">phones</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">phones</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;+48123456789&#39;]
[&#39;+48123456789&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="metody-klasy">
<h2>Metody klasy<a class="headerlink" href="#metody-klasy" title="Permalink to this heading">#</a></h2>
<p>Zwykła metoda ma dostęp do instancji klasy (poprzez parametr <code class="docutils literal notranslate"><span class="pre">self</span></code>).
Z kolei metoda klasy ma dostęp do klasy, z której została wywołana, lub do <strong>klasy instacji</strong>, z której została wywołana.</p>
<p>Metody klasy są przydatne, jeżeli chcemy pozwolić na więcej niż jeden sposób tworzenia instancji.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Date</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="n">day</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">month</span> <span class="o">=</span> <span class="n">month</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">year</span>
    
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">date_as_string</span><span class="p">):</span>
        <span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="n">date_as_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">day</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">month</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">))</span> <span class="c1"># utworzenie instancji klasy cls</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d1</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2016</span><span class="p">)</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s1">&#39;20-01-2016&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Warto zwrócić uwagę na to, że wewnątrz metody <code class="docutils literal notranslate"><span class="pre">from_string</span></code> tworzona jest nowa instancja klasy <code class="docutils literal notranslate"><span class="pre">cls</span></code>.
Nie musi być to klasa <code class="docutils literal notranslate"><span class="pre">Date</span></code>.
Tak będzie w przypadku klas dziedziczących po <code class="docutils literal notranslate"><span class="pre">Date</span></code>.</p>
</section>
<section id="deskryptory">
<h2>Deskryptory<a class="headerlink" href="#deskryptory" title="Permalink to this heading">#</a></h2>
<p>Deskryptorem jest atrybut (obiekt), który zawiera przynajmniej jedną z trzech metod specjalnych tzw. “protokołu deskryptora”.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Metody specjalne deskryptora</p></th>
<th class="head"><p>Opis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__get__(self,</span> <span class="pre">instance,</span> <span class="pre">owner)</span></code></p></td>
<td><p>Wywoływana do pobrania atrybutu z obiektu lub klasy “właściciela”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__set__(self,</span> <span class="pre">instance,</span> <span class="pre">value)</span></code></p></td>
<td><p>Wywoływana do ustawienia wartości atrybutu</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__delete__(self,</span> <span class="pre">instance)</span></code></p></td>
<td><p>Wywoływana w czasie usuwania atrybutu</p></td>
</tr>
</tbody>
</table>
<p>Taki obiekt musi pojawić się jako atrybut w obiekcie - “właścicielu”. W momencie dostępu do takiego atrybutu wywoływane są odpowiednie metody deskryptora.</p>
<section id="rodzaje-deskryptorow">
<h3>Rodzaje deskryptorów<a class="headerlink" href="#rodzaje-deskryptorow" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>non-data descriptor</strong> - posiada tylko metodę <code class="docutils literal notranslate"><span class="pre">__get__()</span></code>. Przy dostępie do atrybutu podjęta może zostać akcja zaimplementowana w metodzie <code class="docutils literal notranslate"><span class="pre">__get__()</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="k">class</span> <span class="nc">DirectorySize</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">owner_class</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">directory_name</span><span class="p">))</span>
    
<span class="k">class</span> <span class="nc">Directory</span><span class="p">:</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">DirectorySize</span><span class="p">()</span> <span class="c1"># descriptor instance</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directory_name</span> <span class="o">=</span> <span class="n">directory_name</span> <span class="c1"># regular instance attribute</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">local_dir</span> <span class="o">=</span> <span class="n">Directory</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="n">local_dir</span><span class="o">.</span><span class="n">size</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>28
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>data descriptor</strong> - posiada zarówno metodę <code class="docutils literal notranslate"><span class="pre">__get__()</span></code> jak i <code class="docutils literal notranslate"><span class="pre">__set__()</span></code>. Może też zawierać definicję metody <code class="docutils literal notranslate"><span class="pre">__delete__()</span></code>. Umożliwia tworzenie obiektu <em>mutable</em>, do którego delegowane są próby dostępu do atrybutu i ustawiania jego wartości.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">LoggedAgeAccess</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">owner_class</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">_age</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Accessing </span><span class="si">%r</span><span class="s1">.</span><span class="si">%r</span><span class="s1"> giving </span><span class="si">%r</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Updating </span><span class="si">%r</span><span class="s1">.</span><span class="si">%r</span><span class="s1"> to </span><span class="si">%r</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">_age</span> <span class="o">=</span> <span class="n">value</span>


<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">LoggedAgeAccess</span><span class="p">()</span>             <span class="c1"># Descriptor instance</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>                <span class="c1"># Regular instance attribute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>                  <span class="c1"># Calls __set__()</span>

    <span class="k">def</span> <span class="nf">birthday</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">+=</span> <span class="mi">1</span>                   <span class="c1"># Calls both __get__() and __set__()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">john</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">mary</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;Mary&quot;</span><span class="p">,</span> <span class="mi">27</span><span class="p">)</span>
<span class="n">john</span><span class="o">.</span><span class="n">birthday</span><span class="p">()</span>
<span class="n">mary</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">30</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:root:Updating &lt;__main__.Person object at 0x000001BE9E42C490&gt;.&#39;age&#39; to 31
INFO:root:Updating &lt;__main__.Person object at 0x000001BE9E9E2450&gt;.&#39;age&#39; to 27
INFO:root:Accessing &lt;__main__.Person object at 0x000001BE9E42C490&gt;.&#39;age&#39; giving 31
INFO:root:Updating &lt;__main__.Person object at 0x000001BE9E42C490&gt;.&#39;age&#39; to 32
INFO:root:Updating &lt;__main__.Person object at 0x000001BE9E9E2450&gt;.&#39;age&#39; to 30
</pre></div>
</div>
</div>
</div>
</section>
<section id="nazwy-atrybutow-i-deskryptory">
<h3>Nazwy atrybutów i deskryptory<a class="headerlink" href="#nazwy-atrybutow-i-deskryptory" title="Permalink to this heading">#</a></h3>
<p>Jeśli klasa używa wielu deskryptorów, to często powstaje potrzeba związania obiektu deskryptora z nazwą atrybutu, nad którym deskryptor przejmuje kontrolę. Wykorzystuje się do tego metodę <code class="docutils literal notranslate"><span class="pre">__set_name__()</span></code> w klasie deskryptora:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">LoggedAccess</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__set_name__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">private_name</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">name</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting names: </span><span class="si">%r</span><span class="s1"> and </span><span class="si">%r</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">private_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">owner_class</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">private_name</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Accessing </span><span class="si">%r</span><span class="s1"> giving </span><span class="si">%r</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Updating </span><span class="si">%r</span><span class="s1"> to </span><span class="si">%r</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">private_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">LoggedAccess</span><span class="p">()</span>                <span class="c1"># First descriptor instance</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">LoggedAccess</span><span class="p">()</span>                 <span class="c1"># Second descriptor instance</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>                 <span class="c1"># Calls the first descriptor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>                   <span class="c1"># Calls the second descriptor</span>

    <span class="k">def</span> <span class="nf">birthday</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:root:Setting names: &#39;name&#39; and &#39;_name&#39;
INFO:root:Setting names: &#39;age&#39; and &#39;_age&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">vars</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">Person</span><span class="p">)[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;public_name&#39;: &#39;name&#39;, &#39;private_name&#39;: &#39;_name&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">vars</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">Person</span><span class="p">)[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;public_name&#39;: &#39;age&#39;, &#39;private_name&#39;: &#39;_age&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">james</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;James&quot;</span><span class="p">,</span> <span class="mi">43</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:root:Updating &#39;name&#39; to &#39;James&#39;
INFO:root:Updating &#39;age&#39; to 43
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">james</span><span class="o">.</span><span class="n">birthday</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:root:Accessing &#39;age&#39; giving 43
INFO:root:Updating &#39;age&#39; to 44
</pre></div>
</div>
</div>
</div>
</section>
<section id="kolejnosc-wyszukiwania-nazw-przy-dostepie-do-atrybutow">
<h3>Kolejność wyszukiwania nazw przy dostępie do atrybutów<a class="headerlink" href="#kolejnosc-wyszukiwania-nazw-przy-dostepie-do-atrybutow" title="Permalink to this heading">#</a></h3>
<section id="wywolanie-z-instancji">
<h4>Wywołanie z instancji<a class="headerlink" href="#wywolanie-z-instancji" title="Permalink to this heading">#</a></h4>
<p>Przy próbie dostępu do atrybutu <code class="docutils literal notranslate"><span class="pre">x</span></code> dla obiektu <code class="docutils literal notranslate"><span class="pre">o</span></code> (<code class="docutils literal notranslate"><span class="pre">o.x</span></code>):</p>
<ul class="simple">
<li><p><strong>data descriptor</strong>: wartość zwrócona z metody <code class="docutils literal notranslate"><span class="pre">__get__()</span></code> deskryptora pola</p></li>
<li><p><strong>składowa instancji</strong>: wartość <code class="docutils literal notranslate"><span class="pre">o.</span> <span class="pre">__dict__[x]</span></code></p></li>
<li><p><strong>non-data descriptor</strong>: wartość zwrócona z metody <code class="docutils literal notranslate"><span class="pre">__get__()</span></code> deskryptora pola</p></li>
<li><p><strong>składowa klasy</strong>: <code class="docutils literal notranslate"><span class="pre">type(o).__dict__['x']</span></code></p></li>
<li><p><strong>składowe klas bazowych</strong>: wyszukiwanie w kolejności MRO,</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">__getattr__()</span></code></strong>, jeśli ta metoda została zdefiniowana w klasie</p></li>
</ul>
</section>
<section id="wywolanie-z-klasy">
<h4>Wywołanie z klasy<a class="headerlink" href="#wywolanie-z-klasy" title="Permalink to this heading">#</a></h4>
<p>Przy próbie dostępu do atrybutu <code class="docutils literal notranslate"><span class="pre">x</span></code> dla klasy <code class="docutils literal notranslate"><span class="pre">C</span></code> (<code class="docutils literal notranslate"><span class="pre">C.x</span></code>):</p>
<ul class="simple">
<li><p><strong>data descriptor</strong>: wartość zwrócona z metody <code class="docutils literal notranslate"><span class="pre">__get__()</span></code> deskryptora pola klasy</p></li>
<li><p><strong>składowa klasy lub klas bazowych</strong>: poszukiwanie w <code class="docutils literal notranslate"><span class="pre">C.__dict__['x']</span></code> lub klasach bazowych</p></li>
<li><p><strong>non-data descriptor</strong>: wartość zwrócona z metody <code class="docutils literal notranslate"><span class="pre">__get__()</span></code> deskryptora pola</p></li>
</ul>
</section>
</section>
<section id="wlasciwosci-properties">
<h3>Właściwości (properties)<a class="headerlink" href="#wlasciwosci-properties" title="Permalink to this heading">#</a></h3>
<p>Przykładem deskryptora jest wbudowany dekorator <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> pozwalający na enkapsulację obiektu, to znaczy kontrolę dostępu do atrybutów przy użyciu metod dostępowych.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BankAccount</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">daily_limit</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__daily_limit</span> <span class="o">=</span> <span class="n">daily_limit</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">daily_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;getting daily_limit&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__daily_limit</span>
    
    <span class="nd">@daily_limit</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">daily_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Value must be &gt;= 0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__daily_limit</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">account</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="mf">100.0</span><span class="p">)</span>
<span class="n">account</span><span class="o">.</span><span class="n">daily_limit</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>getting daily_limit
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">account</span><span class="o">.</span><span class="n">daily_limit</span> <span class="o">=</span> <span class="mf">200.0</span>
<span class="n">account</span><span class="o">.</span><span class="n">daily_limit</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>getting daily_limit
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>200.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">account</span><span class="o">.</span><span class="n">daily_limit</span> <span class="o">=</span> <span class="o">-</span><span class="mf">100.0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">73</span><span class="o">-</span><span class="mi">764421</span><span class="n">fb5f17</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">account</span><span class="o">.</span><span class="n">daily_limit</span> <span class="o">=</span> <span class="o">-</span><span class="mf">100.0</span>

<span class="nn">&lt;ipython-input-70-a7a363ba8f92&gt;</span> in <span class="ni">daily_limit</span><span class="nt">(self, value)</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>     <span class="k">def</span> <span class="nf">daily_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span>         <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">13</span>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Value must be &gt;= 0&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span>         <span class="bp">self</span><span class="o">.</span><span class="n">__daily_limit</span> <span class="o">=</span> <span class="n">value</span>

<span class="ne">ValueError</span>: Value must be &gt;= 0
</pre></div>
</div>
</div>
</div>
<p>Gdyby nie został zdefiniowany setter, to znaczy w kodzie nie pojawiłby się <code class="docutils literal notranslate"><span class="pre">&#64;daily_limit.setter</span></code>, wówczas <code class="docutils literal notranslate"><span class="pre">daily_limit</span></code> byłaby właściwością tylko do odczytu.
Próby zmiany jej wartości kończyłyby się błędem.</p>
</section>
</section>
<section id="sloty">
<h2>Sloty<a class="headerlink" href="#sloty" title="Permalink to this heading">#</a></h2>
<p>Każdy obiekt Pythona posiada <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> - słownik atrybutów typu <code class="docutils literal notranslate"><span class="pre">dict</span></code>. W rezultacie dla każdego obiektu mamy dość spory narzut związany ze zużyciem pamięci i czasem dostępu do składowych słownika.</p>
<p>Jeśli nasza klasa nie zamierza korzystać z dynamicznej natury takiego słownika, to można w klasie zdefiniować atrybut <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> i podać listę wszystkich składowych. Atrybuty wymienione na liście są przechowane w tablicy referencji, która zużywa znacząco mniej pamięci.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Pixel</span><span class="p">:</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Pixel</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Utworzona instancja typu <code class="docutils literal notranslate"><span class="pre">Pixel</span></code> nie posiada słownika <code class="docutils literal notranslate"><span class="pre">__dict__</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="vm">__dict__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">66</span><span class="o">-</span><span class="mi">33</span><span class="n">b2432b7e42</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">p</span><span class="o">.</span><span class="vm">__dict__</span>

<span class="ne">AttributeError</span>: &#39;Pixel&#39; object has no attribute &#39;__dict__&#39;
</pre></div>
</div>
</div>
</div>
<p>Możemy normalnie korzystać z atrybutów <code class="docutils literal notranslate"><span class="pre">x</span></code> i <code class="docutils literal notranslate"><span class="pre">y</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">p</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">20</span>
</pre></div>
</div>
</div>
</div>
<p>Próba ustawienia nowego atrybutu (nie wymienionego na liście slotów) skończy się wyjątkiem:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">30</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">68</span><span class="o">-</span><span class="n">cadbcb940683</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">p</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">30</span>

<span class="ne">AttributeError</span>: &#39;Pixel&#39; object has no attribute &#39;z&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="dziedziczenie">
<h2>Dziedziczenie<a class="headerlink" href="#dziedziczenie" title="Permalink to this heading">#</a></h2>
<section id="podstawy">
<h3>Podstawy<a class="headerlink" href="#podstawy" title="Permalink to this heading">#</a></h3>
<p>Dziedziczenie definiowane jest za pomocą składni:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Base</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">base_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Derived</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">derived_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="method-resolution-order-mro">
<h3>Method Resolution Order (MRO)<a class="headerlink" href="#method-resolution-order-mro" title="Permalink to this heading">#</a></h3>
<p>Wszystkie metody zdefiniowane bezpośrednio w klasie <code class="docutils literal notranslate"><span class="pre">C</span></code> są przechowywane w słowniku <code class="docutils literal notranslate"><span class="pre">C.__dict__</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Base</span><span class="o">.</span><span class="vm">__dict__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mappingproxy({&#39;__module__&#39;: &#39;__main__&#39;,
              &#39;base_method&#39;: &lt;function __main__.Base.base_method(self)&gt;,
              &#39;__dict__&#39;: &lt;attribute &#39;__dict__&#39; of &#39;Base&#39; objects&gt;,
              &#39;__weakref__&#39;: &lt;attribute &#39;__weakref__&#39; of &#39;Base&#39; objects&gt;,
              &#39;__doc__&#39;: None})
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Derived</span><span class="o">.</span><span class="vm">__dict__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mappingproxy({&#39;__module__&#39;: &#39;__main__&#39;,
              &#39;derived_method&#39;: &lt;function __main__.Derived.derived_method(self)&gt;,
              &#39;__doc__&#39;: None})
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">Derived</span><span class="p">()</span>
<span class="n">d</span><span class="o">.</span><span class="n">base_method</span><span class="p">()</span> <span class="c1"># it works</span>
</pre></div>
</div>
</div>
</div>
<p>W klasie potomnej <code class="docutils literal notranslate"><span class="pre">Derived</span></code> dostępne są metody zdefiniowane w klasie bazowej <code class="docutils literal notranslate"><span class="pre">Base</span></code> (takie jak <code class="docutils literal notranslate"><span class="pre">base_method</span></code>), mimo że nie występują one bezpośrednio w słowniku potomka.
W momencie wywoływania metody <code class="docutils literal notranslate"><span class="pre">d.base_method()</span></code>, metoda <code class="docutils literal notranslate"><span class="pre">base_method</span></code> jest poszukiwana w słowniku klasy <code class="docutils literal notranslate"><span class="pre">Derived</span></code>. Ponieważ ten słownik nie ma tej metody, przeszukiwany jest słownik klasy <code class="docutils literal notranslate"><span class="pre">Base</span></code>.</p>
<p>W ogólnym przypadku, przeszukiwane są słowniki wszystkich klas określonych w <code class="docutils literal notranslate"><span class="pre">C.__mro__</span></code>.
Ta krotka zawiera klasę <code class="docutils literal notranslate"><span class="pre">C</span></code>, jej klasy nadrzędne, itd.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Derived</span><span class="o">.</span><span class="vm">__mro__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(__main__.Derived, __main__.Base, object)
</pre></div>
</div>
</div>
</div>
</section>
<section id="dziedziczenie-wielobazowe">
<h3>Dziedziczenie wielobazowe<a class="headerlink" href="#dziedziczenie-wielobazowe" title="Permalink to this heading">#</a></h3>
<p>W Pythonie możliwe jest dziedziczenie po więcej niż jednej klasie.</p>
<p>Przeciążając metody (w szczególności konstruktor <code class="docutils literal notranslate"><span class="pre">__init__</span></code>) należy pamiętać, aby wywołać także wersję rodzica przy użyciu funkcji <code class="docutils literal notranslate"><span class="pre">super</span></code>, która zwraca obiekt proxy służący do wywoływania metod rodzica.
Obiekt jest wybierany zgodnie z MRO.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="o">.</span><span class="vm">__mro__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(__main__.D, __main__.B, __main__.C, __main__.A, object)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A
C
B
D
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;__main__.D at 0x7fc85b329ee0&gt;
</pre></div>
</div>
</div>
</div>
<p>Czasami nie jest możliwe utworzenie sensownego MRO:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span> <span class="k">pass</span>
<span class="k">class</span> <span class="nc">B</span><span class="p">:</span> <span class="k">pass</span>
<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span> <span class="k">pass</span>
<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">):</span> <span class="k">pass</span>
<span class="k">class</span> <span class="nc">E</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">):</span> <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">86</span><span class="o">-</span><span class="n">b8bb9ff5be5c</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span> <span class="k">pass</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">):</span> <span class="k">pass</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="k">class</span> <span class="nc">E</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">):</span> <span class="k">pass</span>

<span class="ne">TypeError</span>: Cannot create a consistent method resolution
<span class="n">order</span> <span class="p">(</span><span class="n">MRO</span><span class="p">)</span> <span class="k">for</span> <span class="n">bases</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="mixins-klasy-domieszkowe">
<h3>Mixins (klasy domieszkowe)<a class="headerlink" href="#mixins-klasy-domieszkowe" title="Permalink to this heading">#</a></h3>
<p>Klasy domieszkowe (<em>mixins</em>) to klasy, które dostarczają określoną funkcjonalność innym klasom (poprzez mechanizm wielokrotnego dziedziczenia).
Nie są samodzielnymi klasami i, w związku z tym, nie tworzy się instancji klas domieszkowych.
Zazwyczaj nazwa takiej klasy kończy się sufixem <code class="docutils literal notranslate"><span class="pre">Mixin</span></code> (np. <code class="docutils literal notranslate"><span class="pre">ComparableMixin</span></code>), ale nie jest to bezwględnie obowiązująca konwencja.</p>
<p>Definiując klasę i wymieniając jej rodziców należy pamiętać, aby najpierw wymienić wszystkie klasy domieszkowe, a dopiero na końcu podać klasę bazową (chyba że jest nią <code class="docutils literal notranslate"><span class="pre">object</span></code>).</p>
<p>W przypadku porównywania obiektów wywoływana jest jedna z sześciu specjalnych metod (<code class="docutils literal notranslate"><span class="pre">__lt__</span></code>, <code class="docutils literal notranslate"><span class="pre">__le__</span></code>, <code class="docutils literal notranslate"><span class="pre">__eq__</span></code>, <code class="docutils literal notranslate"><span class="pre">__ne__</span></code>, <code class="docutils literal notranslate"><span class="pre">__gt__</span></code> lub <code class="docutils literal notranslate"><span class="pre">__ge__</span></code>).
Wystarczy jednak zdefiniować dwie z nich (np. <code class="docutils literal notranslate"><span class="pre">__le__</span></code> i <code class="docutils literal notranslate"><span class="pre">__eq__</span></code>), a pozostałe porównania to odpowiednia kombinacja tych dwóch metod.</p>
<p>Poniżej przedstawiono klasę domieszkową <code class="docutils literal notranslate"><span class="pre">ComparableMixin</span></code>.
Jej użycie powoduje, że wystarczy zdefiniować metody <code class="docutils literal notranslate"><span class="pre">__le__</span></code> i <code class="docutils literal notranslate"><span class="pre">__eq__</span></code>, aby obiekty klasy dziedziczącej po <code class="docutils literal notranslate"><span class="pre">ComparableMixin</span></code> mogły być porównywane.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ComparableMixin</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span> <span class="o">==</span> <span class="n">other</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&lt;</span> <span class="n">other</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span> <span class="o">==</span> <span class="n">other</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">&lt;=</span> <span class="n">other</span>
    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&gt;</span> <span class="n">other</span> <span class="ow">or</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

<span class="k">class</span> <span class="nc">MyInteger</span><span class="p">(</span><span class="n">ComparableMixin</span><span class="p">):</span>  <span class="c1"># klasą bazową jest &quot;object&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="n">i</span>
    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">i</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">i</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">MyInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="dziedziczenie-po-typach-wbudowanych">
<h3>Dziedziczenie po typach wbudowanych<a class="headerlink" href="#dziedziczenie-po-typach-wbudowanych" title="Permalink to this heading">#</a></h3>
<p>Od Pythona 2.2 można dziedziczyć po wszystkich typach wbudowanych.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CountDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">CountDict</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">=</span> <span class="n">CountDict</span><span class="p">()</span>
<span class="n">cd</span><span class="p">[</span><span class="s1">&#39;unknown-key&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
</section>
<section id="dziedziczenie-po-typach-niezmiennych">
<h3>Dziedziczenie po typach niezmiennych<a class="headerlink" href="#dziedziczenie-po-typach-niezmiennych" title="Permalink to this heading">#</a></h3>
<p>Dla typów niezmiennych <em>(immutable)</em> nie działa przeciążanie konstruktora <code class="docutils literal notranslate"><span class="pre">__init__</span></code>.
Po utworzeniu obiektu jest już za późno na jakąkolwiek modyfikację.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PositiveInt</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__new__&#39;</span><span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="k">if</span> <span class="n">obj</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">-</span><span class="n">obj</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">PositiveInt</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>__new__
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
</div>
</div>
<p>Przykład ilustrujący gdzie przekazywane są argumenty:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__new__&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">new_attr</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
        <span class="k">return</span> <span class="n">obj</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Test</span><span class="p">(</span><span class="s2">&quot;gadget&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>__new__ (&#39;gadget&#39;, 42)
__init__ (&#39;gadget&#39;, 42)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">args</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;gadget&#39;, 42)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">new_attr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;test&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="abstract-base-classes">
<h3>Abstract Base Classes<a class="headerlink" href="#abstract-base-classes" title="Permalink to this heading">#</a></h3>
<p>W Pythonie stosowany jest duck-typing, w związku z tym nie ma potrzeby definiowania abstrakcyjnych klas lub interfejsów określających kontrakt.
Warto jednak czasami jawnie określić kontrakt, to znaczy stworzyć abstrakcyjną klasę bazową i określić, jakie metody powinny zostać zdefiniowane.
Nie tworzy się instancji takiej klasy - służy ona jedynie jako dokumentacja.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">abc</span>

<span class="k">class</span> <span class="nc">BaseCalculator</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Calculator</span><span class="p">(</span><span class="n">BaseCalculator</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;2 + 2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<p>Jeżeli w klasie potomnej nie zostanie zdefiniowana wymagana metoda, zostanie rzucony wyjątek.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">InvalidCalculator</span><span class="p">(</span><span class="n">BaseCalculator</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ic</span> <span class="o">=</span> <span class="n">InvalidCalculator</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">101</span><span class="o">-</span><span class="mi">4973</span><span class="n">d17f9fb6</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">ic</span> <span class="o">=</span> <span class="n">InvalidCalculator</span><span class="p">()</span>

<span class="ne">TypeError</span>: Can&#39;t instantiate abstract class InvalidCalculator with abstract methods process
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="klasa-jako-obiekt">
<h2>Klasa jako obiekt<a class="headerlink" href="#klasa-jako-obiekt" title="Permalink to this heading">#</a></h2>
<p>W Pythonie wszystko jest obiektem, także klasa.
Dlatego możemy mówić o <em>obiekcie klasy</em>.
<em>obiekt klasy</em>, tak samo jak każdy obiekt, może być modyfikowany po jego utworzeniu.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Record</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="n">Record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;John&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">person</span> <span class="o">=</span> <span class="n">Record</span><span class="p">()</span>
<span class="n">person</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;John&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Record</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">person</span><span class="o">.</span><span class="n">age</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>42
</pre></div>
</div>
</div>
</div>
<p>Ma to wpływ na wszystkie instancje.</p>
</section>
<section id="class-builders-dataclass">
<h2>Class Builders (<code class="docutils literal notranslate"><span class="pre">&#64;dataclass</span></code>)<a class="headerlink" href="#class-builders-dataclass" title="Permalink to this heading">#</a></h2>
<p>Moduł <code class="docutils literal notranslate"><span class="pre">dataclasses</span></code> dostarcza dekorator, który umożliwia automatyczne generowanie wybranych metod specjalnych, takich jak <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>, <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code> lub <code class="docutils literal notranslate"><span class="pre">__eq__()</span></code>.</p>
<p>Składowe obiektu, które są wykorzystywane w implementacjach metod, są definiowane na podstawie pól klasy wraz adnotacjami typu.</p>
<p>Na przykład, dla poniższej klasy:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">LineItem</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">unit_price</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">quantity</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">total</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>
</pre></div>
</div>
</div>
</div>
<p>wygenerowana zostanie funkcja <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>, która wygląda następująco:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">unit_price</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">quantity</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unit_price</span> <span class="o">=</span> <span class="n">unit_price</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>
</pre></div>
</div>
</div>
</div>
<p>Stosując dekorator <code class="docutils literal notranslate"><span class="pre">&#64;dataclass</span></code> możemy dużo szybciej tworzyć proste klasy i rozbudowywać je dodając do nich potrzebne metody.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_1</span> <span class="o">=</span> <span class="n">LineItem</span><span class="p">(</span><span class="s2">&quot;ipad&quot;</span><span class="p">,</span> <span class="mf">7665.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">repr</span><span class="p">(</span><span class="n">line_1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;LineItem(name=&#39;ipad&#39;, unit_price=7665.0, quantity=1)&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_1</span><span class="o">.</span><span class="n">total</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7665.0
</pre></div>
</div>
</div>
</div>
<section id="parametry-dekoratora-dataclass">
<h3>Parametry dekoratora <code class="docutils literal notranslate"><span class="pre">&#64;dataclass</span></code><a class="headerlink" href="#parametry-dekoratora-dataclass" title="Permalink to this heading">#</a></h3>
<p>Do dekoratora <code class="docutils literal notranslate"><span class="pre">&#64;dataclass</span></code> możemy przekazać następujące paramtetry:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Parametr</p></th>
<th class="head"><p>Wartość domyślna</p></th>
<th class="head"><p>Efekt (jeśli <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">init</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>definicja metody <code class="docutils literal notranslate"><span class="pre">__init__</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">repr</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>definicja metody <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> (jeśli klasa nie definiuje własnej implementacji)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">eq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>definicja metody <code class="docutils literal notranslate"><span class="pre">__eq__</span></code> (instancje są porównywane jak krotki)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">order</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>definicja metod <code class="docutils literal notranslate"><span class="pre">__lt__()</span></code>, <code class="docutils literal notranslate"><span class="pre">__le__()</span></code>, <code class="docutils literal notranslate"><span class="pre">__gt__()</span></code>, and <code class="docutils literal notranslate"><span class="pre">__ge__()</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unsafe_hash</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>definicja metody <code class="docutils literal notranslate"><span class="pre">__hash__()</span></code> (ta opcja implikuje, że instancje powinny być <em>immutable</em>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">frozen</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>próba przypisania wartości dla pola generuje wyjątek (instancje są <em>immutable</em>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">match_args</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>tworzona jest krotka <code class="docutils literal notranslate"><span class="pre">__match_args__</span></code> z listy parametrów metody <code class="docutils literal notranslate"><span class="pre">__init__()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">slots</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>generowany jest atrybut <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> i nowa klasa jest zwrócona w miejsce klasy ogryginalnej</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unsafe_hash</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">people</span> <span class="o">=</span> <span class="p">[</span><span class="n">Person</span><span class="p">(</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="mi">33</span><span class="p">),</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;Eve&quot;</span><span class="p">,</span> <span class="mi">44</span><span class="p">),</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;Adam&quot;</span><span class="p">,</span> <span class="mi">33</span><span class="p">)]</span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">people</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[Person(name=&#39;Adam&#39;, age=33),
 Person(name=&#39;Eve&#39;, age=44),
 Person(name=&#39;John&#39;, age=33)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">hash</span><span class="p">(</span><span class="n">people</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-5191814165429172402
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">people</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Unknown&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FrozenInstanceError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="mi">2</span><span class="n">c1af0d06026</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">people</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Unknown&quot;</span>

<span class="nn">&lt;string&gt;</span> in <span class="ni">__setattr__</span><span class="nt">(self, name, value)</span>

<span class="ne">FrozenInstanceError</span>: cannot assign to field &#39;name&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="implementacja-skladowych">
<h3>Implementacja składowych<a class="headerlink" href="#implementacja-skladowych" title="Permalink to this heading">#</a></h3>
<p>Funkcja <code class="docutils literal notranslate"><span class="pre">field()</span></code> precyzuje sposób, w jaki dane pole jest implementowane.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">field</span>


<span class="nd">@dataclass</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">compare</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">friends</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Person&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="mi">44</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span>
<span class="n">p1</span> <span class="o">==</span> <span class="n">p2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">friends</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
<span class="n">p1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Person(name=&#39;John&#39;, age=44, friends=[Person(name=&#39;John&#39;, age=23, friends=[])])
</pre></div>
</div>
</div>
</div>
<p>Opcje funkcji <code class="docutils literal notranslate"><span class="pre">field()</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code> - domyślna wartość dla pola</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default_factory</span></code> - funkcja bezargumentowa, która tworzy domyślną instancję przypisywaną do pola</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init</span></code> - jeśli <code class="docutils literal notranslate"><span class="pre">True</span></code>, pole jest użyte jako parametr metody <code class="docutils literal notranslate"><span class="pre">__init__()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">repr</span></code> - jeśli <code class="docutils literal notranslate"><span class="pre">True</span></code>, pole jest użyte w implementacji metody <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash</span></code> - jeśli <code class="docutils literal notranslate"><span class="pre">True</span></code>, pole jest użyte w implementacji metody <code class="docutils literal notranslate"><span class="pre">__hash__()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compare</span></code> - jeśli <code class="docutils literal notranslate"><span class="pre">True</span></code>, pole jest użyte w implementacji metod <code class="docutils literal notranslate"><span class="pre">__eq__()</span></code> i innych</p></li>
</ul>
</section>
<section id="przydatne-metody-dataclass-y">
<h3>Przydatne metody dataclass’y<a class="headerlink" href="#przydatne-metody-dataclass-y" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fields()</span></code> - zwraca krotkę pól klasy</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dataclasses</span>

<span class="n">dataclasses</span><span class="o">.</span><span class="n">fields</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(Field(name=&#39;name&#39;,type=&lt;class &#39;str&#39;&gt;,default=&lt;dataclasses._MISSING_TYPE object at 0x7f8fbd270a60&gt;,default_factory=&lt;dataclasses._MISSING_TYPE object at 0x7f8fbd270a60&gt;,init=True,repr=True,hash=None,compare=True,metadata=mappingproxy({}),_field_type=_FIELD),
 Field(name=&#39;age&#39;,type=&lt;class &#39;int&#39;&gt;,default=&lt;dataclasses._MISSING_TYPE object at 0x7f8fbd270a60&gt;,default_factory=&lt;dataclasses._MISSING_TYPE object at 0x7f8fbd270a60&gt;,init=True,repr=True,hash=None,compare=False,metadata=mappingproxy({}),_field_type=_FIELD),
 Field(name=&#39;friends&#39;,type=typing.List[ForwardRef(&#39;Person&#39;)],default=&lt;dataclasses._MISSING_TYPE object at 0x7f8fbd270a60&gt;,default_factory=&lt;class &#39;list&#39;&gt;,init=True,repr=True,hash=None,compare=True,metadata=mappingproxy({}),_field_type=_FIELD))
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">asdict()</span></code> - konweruje instancję dataclass’y do słownika</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataclasses</span><span class="o">.</span><span class="n">asdict</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;name&#39;: &#39;John&#39;,
 &#39;age&#39;: 44,
 &#39;friends&#39;: [{&#39;name&#39;: &#39;John&#39;, &#39;age&#39;: 23, &#39;friends&#39;: []}]}
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">astuple()</span></code> - konwertuje instancję do krotki</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataclasses</span><span class="o">.</span><span class="n">astuple</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;John&#39;, 23, [])
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">replace(obj,</span> <span class="pre">**changes)</span></code> - tworzy nową instancję na podstawie <code class="docutils literal notranslate"><span class="pre">obj</span></code> ze zmienionymi wartościami pól z <code class="docutils literal notranslate"><span class="pre">**changes</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataclasses</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">88</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Person(name=&#39;John&#39;, age=88, friends=[Person(name=&#39;John&#39;, age=23, friends=[])])
</pre></div>
</div>
</div>
</div>
</section>
<section id="post-init">
<h3>Post-init<a class="headerlink" href="#post-init" title="Permalink to this heading">#</a></h3>
<p>Metoda <code class="docutils literal notranslate"><span class="pre">__post_init__()</span></code> umożliwia inicjalizację tzw. pól wyliczanych:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">LineItem</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">unit_price</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">quantity</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">total</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_1</span> <span class="o">=</span> <span class="n">LineItem</span><span class="p">(</span><span class="s2">&quot;ipad&quot;</span><span class="p">,</span> <span class="mf">7999.99</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">line_1</span><span class="o">.</span><span class="n">total</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>15999.98
</pre></div>
</div>
</div>
</div>
</section>
<section id="pola-klasy">
<h3>Pola klasy<a class="headerlink" href="#pola-klasy" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">ClassVar</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Entity</span><span class="p">:</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">count</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">entities</span> <span class="o">=</span> <span class="p">[</span><span class="n">Entity</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Entity</span><span class="o">.</span><span class="n">count</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Zaawansowane programowanie w języku Python</p>
      </div>
    </a>
    <a class="right-next"
       href="builtins.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Optymalne wykorzystanie wbudowanych typów Pythona</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-jako-jezyk-obiektowy-podstawowe-informacje">Python jako język obiektowy - podstawowe informacje</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wszystko-jest-obiektem">Wszystko jest obiektem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamiczne-typowanie">Dynamiczne typowanie</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tozsamosc-typ-a-wartosc">Tożsamość, typ a wartość</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definiowanie-klasy">Definiowanie klasy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-specjalne">Metody specjalne</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#najwazniejsze-metody-specjalne">Najważniejsze metody specjalne</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-operatorowe">Metody operatorowe</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dostep-do-atrybutow">Dostęp do atrybutów</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#skladowe-chronione-i-prywatne">Składowe chronione i prywatne</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skladowe-chronione">Składowe chronione</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skladowe-prywatne">Składowe prywatne</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#atrybuty-klasy-i-metody-statyczne">Atrybuty klasy i metody statyczne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metody-klasy">Metody klasy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deskryptory">Deskryptory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rodzaje-deskryptorow">Rodzaje deskryptorów</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nazwy-atrybutow-i-deskryptory">Nazwy atrybutów i deskryptory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kolejnosc-wyszukiwania-nazw-przy-dostepie-do-atrybutow">Kolejność wyszukiwania nazw przy dostępie do atrybutów</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wywolanie-z-instancji">Wywołanie z instancji</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wywolanie-z-klasy">Wywołanie z klasy</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wlasciwosci-properties">Właściwości (properties)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sloty">Sloty</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dziedziczenie">Dziedziczenie</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#podstawy">Podstawy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method-resolution-order-mro">Method Resolution Order (MRO)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dziedziczenie-wielobazowe">Dziedziczenie wielobazowe</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mixins-klasy-domieszkowe">Mixins (klasy domieszkowe)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dziedziczenie-po-typach-wbudowanych">Dziedziczenie po typach wbudowanych</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dziedziczenie-po-typach-niezmiennych">Dziedziczenie po typach niezmiennych</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#abstract-base-classes">Abstract Base Classes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#klasa-jako-obiekt">Klasa jako obiekt</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#class-builders-dataclass">Class Builders (<code class="docutils literal notranslate"><span class="pre">@dataclass</span></code>)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parametry-dekoratora-dataclass">Parametry dekoratora <code class="docutils literal notranslate"><span class="pre">@dataclass</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementacja-skladowych">Implementacja składowych</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#przydatne-metody-dataclass-y">Przydatne metody dataclass’y</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#post-init">Post-init</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pola-klasy">Pola klasy</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Krystian Piękoś
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>